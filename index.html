<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VendorConnect - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
  .vendor-card:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }
  .featured-foods img:hover {
    filter: brightness(90%);
    transform: scale(1.05);
    transition: 0.3s ease;
  }
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE 10+ */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  
  header img {
    transition: transform 0.2s ease;
  }

  header img:hover {
    transform: scale(1.05);
  }

  header a {
    font-weight: 500;
  }

  @media (max-width: 768px) {
    header .text-center {
      text-align: center !important;
    }
  }


</style>

</head>
<body class="bg-purple-50 min-h-screen font-sans">
<header class="bg-[#7a3e1d] py-6 shadow-md text-white">
  <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4">
    <!-- Logo + Title -->
    <div class="text-center md:text-left">
      <h1 class="text-4xl font-bold">VendorConnect</h1>
      <p class="text-lg mt-1">Connecting street vendors with trusted raw material suppliers</p>
    </div>

    <!-- Profile Section -->
    <div class="flex items-center space-x-4">
      <div class="flex items-center space-x-3">
        <img src="https://i.pravatar.cc/40" alt="User Avatar" class="w-10 h-10 rounded-full border-2 border-white shadow" />
        <h2>Welcome, <span id="user-name"></span>!</h2>

      </div>
      <a href="/logout" class="ml-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded shadow-md transition">
        🚪 Logout
      </a>
    </div>
  </div>
</header>








  <main class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-6 py-10">
    <!-- Left Panel -->
    <section class="bg-white rounded-xl shadow p-6 space-y-6 md:col-span-1">
  <h2 class="text-2xl font-semibold text-gray-800">🔍 Search Suppliers</h2>

  <!-- Use My Location FIRST -->
  <button onclick="getLocation()" class="bg-[#800000] text-white py-2 w-full rounded hover:bg-[#660000]">
    📍 Use My Location
  </button>
  <p id="locationStatus" class="text-sm text-gray-600"></p>

  <!-- City Input -->
  <div>
    <label class="block mb-1 font-medium">City</label>
    <input type="text" id="city" placeholder="e.g., Pune" class="w-full border p-2 rounded bg-blue-100" />
  </div>

  <!-- Type Dropdown -->
  <div>
    <label class="block mb-1 font-medium">Type</label>
    <select id="vegType" class="w-full border p-2 rounded bg-blue-100">
      <option value="">Select Type</option>
      <option value="Veg">Veg</option>
      <option value="Non-Veg">Non-Veg</option>
    </select>
  </div>

  <!-- Category Dropdown -->
  <div>
    <label class="block mb-2 font-medium">Category</label>
    <select id="category" class="w-full border p-2 rounded bg-blue-100" disabled>
      <option value="">Select Category</option>
    </select>
  </div>

  <!-- Search Vendors -->
  <button onclick="searchSuppliers()" class="w-full bg-[#b34700] text-white py-2 rounded hover:bg-[#8c3900]">
    🔎 Search Vendors
  </button>

  <!-- Reset (if you have one) -->
  <button onclick="location.reload()" class="w-full bg-gray-300 text-gray-800 py-2 rounded hover:bg-gray-400">
    🔄 Reset
  </button>
</section>

    </section>

    <!-- Right Panel -->
    <section class="md:col-span-2 space-y-6">
      <div id="defaultView" class="text-center py-12 px-4 text-gray-700 space-y-6">
        <h2 class="text-2xl font-bold text-orange-600">Find Trusted FOOD Suppliers</h2>
        <p class="mb-4 text-gray-600">Search by your location and food category to view verified vendors with contact details.</p>
        <div class="grid sm:grid-cols-3 gap-4 mt-8">
          <div class="bg-white shadow-md p-4 rounded-xl">
            <h3 class="font-semibold text-lg text-green-700">📍 Location Aware</h3>
            <p class="text-sm text-gray-600">Get suppliers closest to your area.</p>
          </div>
          <div class="bg-white shadow-md p-4 rounded-xl">
            <h3 class="font-semibold text-lg text-green-700">📞 Direct Contact</h3>
            <p class="text-sm text-gray-600">Call suppliers directly from dashboard.</p>
          </div>
          <div class="bg-white shadow-md p-4 rounded-xl">
            <h3 class="font-semibold text-lg text-green-700">⭐ Rated Vendors</h3>
            <p class="text-sm text-gray-600">See what other vendors recommend.</p>
          </div>
        </div>
      </div>
      <div id="featuredSection" class="mt-6">
  <h3 class="text-lg font-semibold text-orange-700 mb-3 flex items-center gap-2">
    🍽️ Featured Items
  </h3>

  <div class="flex space-x-4 overflow-x-auto pb-2 scrollbar-hide">
    <!-- Card 1 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/dosa.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Dosa">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Dosa</p>
        <span class="text-xs text-orange-500">🔥 Trending</span>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/chowmein.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Sushi">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Noodles</p>
        <span class="text-xs text-orange-500">💡 Popular</span>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/burger.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Burger">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Burger</p>
        <span class="text-xs text-orange-500">⭐ Staff Pick</span>
      </div>
    </div>

    <!-- Card 4 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/chola.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Chole Bhature">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Chole Bhature</p>
        <span class="text-xs text-orange-500">🌟 Best Seller</span>
      </div>
    </div>

    <!-- Card 5 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/panipuri.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Panipuri">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Panipuri</p>
        <span class="text-xs text-orange-500">📍 Local Favorite</span>
      </div>
    </div>

    <!-- Card 6 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/samosa.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Samosa">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Samosa</p>
        <span class="text-xs text-orange-500">🔥 Hot Pick</span>
      </div>
    </div>

    <!-- Card 7 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/sweets.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Noodles">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Sweets</p>
        <span class="text-xs text-orange-500">🍜 Best in Taste</span>
      </div>
    </div>

    <!-- Card 8 -->
    <div class="min-w-[160px] bg-white rounded-xl shadow-md hover:shadow-lg transition p-2">
      <img src="./images/idli.jpeg" class="h-24 w-full object-cover rounded-lg" alt="Idli">
      <div class="mt-2 text-center">
        <p class="font-medium text-sm">Idli</p>
        <span class="text-xs text-orange-500">🧡 South Classic</span>
      </div>
    </div>
  </div>
</div>


      <div id="foodVisualWrapper" class="hidden">
        <h3 class="text-xl font-semibold text-orange-700 mb-2">🍽️ Select a Food Item</h3>
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4" id="foodVisualCards"></div>
      </div>

      <div id="results" class="hidden">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-2xl font-semibold text-green-800">📦 Vendors Found</h3>
          <span id="vendorCount" class="text-sm text-gray-600"></span>
        </div>
        <ul id="resultList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6"></ul>
      </div>
    </section>
  </main>


  <script>
    const foodItems = {
      "Veg": {
        "Snacks": ["Momos", "Rolls", "Chowmein", "Samosa", "Panipuri", "Sweets", "Drinks"],
        "Meals": ["Litti Chokha", "Chola Bhatura", "Dosa", "Idli"]
      },
      "Non-Veg": {
        "Snacks": ["Rolls", "Momos", "Lollipop", "Sandwich", "Burger"],
        "Meals": ["Biryani", "Pulawo", "Chicken Curry", "Fish Curry", "Egg Curry"]
      }
    };
const foodImages = {
  "Momos": "./images/momos.jpeg",
  "Rolls": "./images/rolls.jpeg",
  "Chowmein": "./images/chowmein.jpeg",
  "Samosa": "./images/samosa.jpeg",
  "Panipuri": "./images/panipuri.jpeg",
  "Sweets": "./images/sweets.jpeg",
  "Drinks": "./images/drinks.jpeg",
  "Litti Chokha": "./images/litti.jpeg",
  "Chola Bhatura": "./images/chola.jpeg",
  "Dosa": "./images/dosa.jpeg",
  "Idli": "./images/idli.jpeg",
  "Lollipop": "./images/lollipop.jpeg",
  "Sandwich": "./images/sandwich.jpeg",
  "Burger": "./images/burger.jpeg",
  "Biryani": "./images/cbiryani.jpeg",
  "Pulawo": "./images/pulaow.jpeg",
  "Chicken Curry": "./images/curry.jpeg",
  "Fish Curry": "./images/fcurry.jpeg",
  "Egg Curry": "./images/ecurry.jpeg"
};

   const dummyVendors = [
  {
    name: "Veg Delight Suppliers",
    city: "Pune",
    type: "Veg",
    category: "Snacks",
    food: "Momos",
    contact: "9876543210",
    materials: ["Maida", "Vegetables", "Oil"],
    image: foodImages["Momos"] // ✅ Fixed
  },
  {
    name: "Chicken Curry King",
    city: "Pune",
    type: "Non-Veg",
    category: "Meals",
    food: "Chicken Curry",
    contact: "9876543222",
    materials: ["Chicken", "Spices", "Onion"],
    image: foodImages["Chicken Curry"] // ✅ Consistent access
  },
  {
    name: "South Taste Foods",
    city: "Mumbai",
    type: "Veg",
    category: "Meals",
    food: "Idli",
    contact: "9876543233",
    materials: ["Rice", "Urad Dal", "Coconut"],
    image: foodImages["Idli"] // ✅ Proper key
  }
];


    let selectedFood = "";
    let selectedType = "";
    let selectedCategory = "";

    const vegTypeSelect = document.getElementById("vegType");
    const categorySelect = document.getElementById("category");
    const foodVisualCards = document.getElementById("foodVisualCards");
    const foodVisualWrapper = document.getElementById("foodVisualWrapper");

    const defaultView = document.getElementById("defaultView");
    const resultSection = document.getElementById("results");
    const resultList = document.getElementById("resultList");
    const vendorCount = document.getElementById("vendorCount");

    vegTypeSelect.addEventListener("change", () => {
      selectedType = vegTypeSelect.value;
      categorySelect.innerHTML = '<option value="">Select Category</option>';
      foodVisualCards.innerHTML = "";
      foodVisualWrapper.classList.add("hidden");

      if (foodItems[selectedType]) {
        categorySelect.disabled = false;
        Object.keys(foodItems[selectedType]).forEach(cat => {
          const opt = document.createElement("option");
          opt.value = cat;
          opt.textContent = cat;
          categorySelect.appendChild(opt);
        });
      } else {
        categorySelect.disabled = true;
      }
    });

    categorySelect.addEventListener("change", () => {
      selectedCategory = categorySelect.value;
      renderFoodVisuals();
    });

    function renderFoodVisuals() {
      foodVisualCards.innerHTML = "";
      foodVisualWrapper.classList.remove("hidden");

      if (selectedType && selectedCategory && foodItems[selectedType][selectedCategory]) {
        foodItems[selectedType][selectedCategory].forEach(food => {
          const div = document.createElement("div");
          div.className = "cursor-pointer transition transform hover:scale-105 border rounded-xl shadow-sm overflow-hidden";
          div.innerHTML = `
           <img src="${foodImages[food] || './images/placeholder.jpg'}" alt="${food}" class="w-full h-24 object-cover" />

            <p class="text-sm font-medium py-1 bg-orange-100 text-center">${food}</p>
          `;
          div.onclick = () => {
            selectedFood = food;
            document.querySelectorAll("#foodVisualCards div").forEach(card => card.classList.remove("ring-2", "ring-orange-500"));
            div.classList.add("ring-2", "ring-orange-500");
          };
          foodVisualCards.appendChild(div);
        });
      }
    }

    function searchSuppliers() {
      const city = document.getElementById("city").value.trim();

      if (!city || !selectedType || !selectedCategory || !selectedFood) {
        alert("⚠️ Please select all fields before searching.");
        return;
      }

      const filtered = dummyVendors.filter(v =>
        v.city.toLowerCase() === city.toLowerCase() &&
        v.type === selectedType &&
        v.category === selectedCategory &&
        v.food === selectedFood
      );

      resultList.innerHTML = "";
      vendorCount.textContent = `${filtered.length} vendor${filtered.length !== 1 ? "s" : ""} found`;

      if (filtered.length > 0) {
        filtered.forEach(v => {
          resultList.innerHTML += `
            <li class="bg-white rounded-xl shadow p-4 hover:shadow-lg transition">
              <img src="${v.image}" class="w-full h-32 object-cover rounded mb-2" alt="${v.name}" />
              <h4 class="text-lg font-bold text-orange-700">${v.name}</h4>
              <p class="text-sm text-gray-600 mb-1">📍 ${v.city}</p>
              <p class="text-sm mb-1">🍴 Food: <strong>${v.food}</strong></p>
              <p class="text-sm mb-1">🧂 Materials: ${v.materials.join(", ")}</p>
              <a href="tel:${v.contact}" class="mt-2 inline-block bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm">
                📞 Call Vendor
              </a>
            </li>
          `;
        });
      } else {
        resultList.innerHTML = `<p class="text-gray-500">No vendors found for "${selectedFood}" in "${city}".</p>`;
      }

      defaultView.classList.add("hidden");
      foodVisualWrapper.classList.add("hidden"); // hide food visual section
resultSection.classList.remove("hidden");
resultSection.scrollIntoView({ behavior: "smooth" });

    }

    function getLocation() {
  const status = document.getElementById("locationStatus");
  if (navigator.geolocation) {
    status.textContent = "Detecting location...";
    navigator.geolocation.getCurrentPosition((pos) => {
      status.textContent = `Location set to Pune (Lat ${pos.coords.latitude.toFixed(2)}, Lon ${pos.coords.longitude.toFixed(2)})`;
      document.getElementById("city").value = "Pune"; // Can integrate with reverse geocoding for dynamic city
    }, () => {
      status.textContent = "Location access denied.";
    });
  } else {
    status.textContent = "Geolocation not supported.";
  }
}

    function resetFields() {
  document.getElementById("city").value = "";
  vegTypeSelect.value = "";
  categorySelect.innerHTML = '<option value="">Select Category</option>';
  categorySelect.disabled = true;
  foodVisualWrapper.classList.add("hidden");
  foodVisualCards.innerHTML = "";
  selectedFood = "";
  selectedType = "";
  selectedCategory = "";
  resultSection.classList.add("hidden");
  defaultView.classList.remove("hidden");
  vendorCount.textContent = "";
}
 
  const featuredSection = document.getElementById('featuredSection');

  categorySelect.addEventListener('change', () => {
    if (categorySelect.value !== "") {
      featuredSection.style.display = "none";
    } else {
      featuredSection.style.display = "block";
    }
  });

function logout() {
  alert("You have been logged out.");
  // Clear any session/localStorage or redirect to login
  window.location.href = "/logout"; // Adjust the target as per your routing
}window.onload = () => {
  const name = localStorage.getItem('userName');
  if (name) {
    document.getElementById('user-name').textContent = name;
  } else {
    window.location.href = '/logout'; // Not logged in, redirect to land.html
  }
}


  </script>
</body>
</html>
